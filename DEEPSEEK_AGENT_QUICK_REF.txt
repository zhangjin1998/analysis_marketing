╔════════════════════════════════════════════════════════════════════════════════╗
║                                                                                ║
║   🤖 DeepSeek AI Agent - 快速参考卡                                            ║
║                                                                                ║
║   A股短线交易系统 + DeepSeek 智能体                                             ║
║                                                                                ║
╚════════════════════════════════════════════════════════════════════════════════╝

【快速启动】3 步开始使用

1️⃣  进入项目目录
    cd /home/deeproute/zj/cg/a-share-agent

2️⃣  设置环境变量
    export DEEPSEEK_API_KEY="sk-0252c421598b44a9be3cbe68425dfa0d"
    export TRADING_MODEL="deepseek"

3️⃣  启动 Agent
    python3 scripts/run_agent.py

════════════════════════════════════════════════════════════════════════════════

【核心技术】

✅ LLM: DeepSeek V3 (国内最强大模型)
✅ SDK: OpenAI Python SDK (官方推荐)
✅ API: https://api.deepseek.com (官方 API)
✅ Model: deepseek-chat (主要模型)
✅ 成本: ¥0 (免费额度足够)

════════════════════════════════════════════════════════════════════════════════

【使用示例】

🧑 你: 现在市场怎么样?
🤖 Agent: 
   [LLM] DeepSeek 返回: 我来为您查询...
   [LLM] 触发工具: query_market_breadth
   
   📊 市场宽度分析 (截止 2025-11-01)
   ├─ 市场态势: Neutral 🟡
   ├─ 宽度得分: 0.230
   └─ 推荐仓位: 75.73%

════════════════════════════════════════════════════════════════════════════════

【支持的所有问题】

输入内容                    返回内容               工具函数
─────────────────────────────────────────────────────────────
市场怎么样？              市场宽度分析           query_market_breadth()
现在市场情况              ├─ 市场态势            
市场宽度怎么样            ├─ 推荐仓位
                         └─ 详细分析

今天有什么股票？          今日交易订单           query_today_signals()
推荐什么股票              ├─ 5个标的
有什么买入信号            ├─ 权重配置
                         └─ 排名详情

系统参数是什么？          系统参数配置           get_system_parameters()
参数配置                  ├─ 动量阈值
规则是什么                ├─ 波动阈值
                         └─ 调整方法

历史表现怎么样？          回测统计数据           query_backtest_stats()
回测数据                  ├─ 年化收益
表现统计                  ├─ 夏普比率
                         └─ 最大回撤

更新系统数据              系统更新进度           run_system_update()
重新计算信号              ├─ 数据下载
刷新数据                  ├─ 计算完成
                         └─ 结果保存

help / 帮助               使用说明               help_command()
                         ├─ 命令列表
                         └─ 示例

════════════════════════════════════════════════════════════════════════════════

【工作流程】

用户输入 (自然语言)
    ↓
OpenAI SDK → DeepSeek API
    ↓
LLM 理解意图
    ↓
LLM 推荐工具
    ↓
系统调用工具
    ↓
获取数据
    ↓
返回结果 (中文)

════════════════════════════════════════════════════════════════════════════════

【关键特性】

✅ 100% 中文交互
   - 无需英文输入
   - 完全自然语言
   - 输出中文结果

✅ 真正的 AI 智能体
   - DeepSeek V3 驱动
   - 自动意图识别
   - 智能工具调用

✅ 实时市场分析
   - 基于真实数据
   - 1-5 日短线
   - 动态风控

✅ 完全免费
   - ¥0 成本
   - 免费额度充足
   - 无付费限制

════════════════════════════════════════════════════════════════════════════════

【系统架构】

agents/
  ├─ trading_agent.py       ← AI Agent 核心
  │  ├─ create_llm_agent()          [创建 DeepSeek 客户端]
  │  ├─ llm_agent_process()         [调用 LLM]
  │  └─ run_agent_loop()            [主交互循环]
  │
  └─ model_config.py        ← 模型配置

scripts/
  └─ run_agent.py           ← 启动脚本

src/
  ├─ breadth.py             ← 市场宽度分析
  ├─ signals.py             ← 信号生成
  ├─ risk.py                ← 风险管理
  └─ orders.py              ← 订单导出

════════════════════════════════════════════════════════════════════════════════

【常见问题】

Q: 为什么用 OpenAI SDK 而不是 LangChain?
A: OpenAI SDK 是官方推荐方式，更稳定、更简洁、无版本兼容问题。

Q: DeepSeek API 成本是多少?
A: 完全免费！有 ¥500 免费额度，可用 3-6 个月。

Q: 能不能用其他 LLM?
A: 可以，在 TRADING_MODEL 环境变量中选择其他模型（支持 OpenAI/Claude/Qwen 等）。

Q: 如何自定义参数?
A: 编辑 src/signals.py 中的参数设定，然后重启即可。

Q: 能否支持实时交易?
A: 目前提供信号+仓位建议，可集成 CTP/TT 自动下单 API。

════════════════════════════════════════════════════════════════════════════════

【API 调用示例】(仅参考，不需要手工调用)

from openai import OpenAI

client = OpenAI(
    api_key="sk-0252c421598b44a9be3cbe68425dfa0d",
    base_url="https://api.deepseek.com"
)

response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[
        {"role": "system", "content": "你是 A 股交易助手"},
        {"role": "user", "content": "现在市场怎么样"}
    ],
    stream=False,
    temperature=0.7,
    max_tokens=2000
)

print(response.choices[0].message.content)

════════════════════════════════════════════════════════════════════════════════

【调试技巧】

查看 LLM 调用:
   - 系统会打印 "[LLM] DeepSeek 返回: ..."
   - 系统会打印 "[LLM] 触发工具: ..."
   
查看完整日志:
   python3 scripts/run_agent.py 2>&1 | tee agent.log

查看系统数据:
   ls -lh data/market/
   
检查环境变量:
   echo $DEEPSEEK_API_KEY
   echo $TRADING_MODEL

════════════════════════════════════════════════════════════════════════════════

【下一步】

推荐立即使用！

系统已完全就绪：
  ✅ 所有功能已验证
  ✅ 所有工具已测试
  ✅ 无需任何调整

可选增强：
  • 添加 Web UI 界面
  • 集成自动交易 API
  • 添加更多大模型
  • 部署到云端
  • 添加多轮对话记忆

════════════════════════════════════════════════════════════════════════════════

🚀 现在就试试吧！

cd /home/deeproute/zj/cg/a-share-agent
export DEEPSEEK_API_KEY="sk-0252c421598b44a9be3cbe68425dfa0d"
python3 scripts/run_agent.py

🧑 你: 现在市场怎么样？
🤖 Agent: [自动分析和返回结果]

祝交易顺利！📈✨

════════════════════════════════════════════════════════════════════════════════
