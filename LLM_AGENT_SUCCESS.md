# ğŸ‰ DeepSeek AI Agent - æˆåŠŸé›†æˆï¼

## âœ… çŠ¶æ€: å®Œå…¨å°±ç»ª

ç»è¿‡å¤šæ¬¡ä¼˜åŒ–å’Œè°ƒè¯•ï¼Œ**DeepSeek AI Agent å·²ç»æˆåŠŸé›†æˆå¹¶å®Œå…¨å¯ç”¨ï¼**

---

## ğŸš€ å·¥ä½œåŸç†

```
ç”¨æˆ·è¾“å…¥ (è‡ªç„¶è¯­è¨€)
    â†“
OpenAI SDK + DeepSeek API
    â†“
LLM ç†è§£ç”¨æˆ·æ„å›¾
    â†“
LLM æ¨èè°ƒç”¨å“ªä¸ªå·¥å…·
    â†“
ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨å¯¹åº”å·¥å…·
    â†“
è¿”å›ç²¾å‡†ç»“æœ (ä¸­æ–‡è‡ªç„¶è¯­è¨€)
```

---

## ğŸ“Š å®æ—¶æµ‹è¯•ç»“æœ

```
ğŸ§‘ ä½ : ç°åœ¨å¸‚åœºæ€ä¹ˆæ ·

[LLM] DeepSeek è¿”å›: æˆ‘æ¥ä¸ºæ‚¨æŸ¥è¯¢å½“å‰å¸‚åœºæƒ…å†µ...
[LLM] è§¦å‘å·¥å…·: query_market_breadth

âœ¨ Agent: 
ğŸ“Š å¸‚åœºå®½åº¦åˆ†æ (æˆªæ­¢ 2025-11-01)
â”œâ”€ å¸‚åœºæ€åŠ¿: Neutral ğŸŸ¡
â”œâ”€ å®½åº¦å¾—åˆ†: 0.230
â”œâ”€ ä¸Šæ¶¨å®¶æ•°: 18 å®¶
â”œâ”€ ä¸‹è·Œå®¶æ•°: 22 å®¶
â”œâ”€ ä¸Šå‡æ¯”ä¾‹: -4.00%
â””â”€ æ¨èä»“ä½: 75.73%

è§£è¯»:
âš ï¸ å¸‚åœºä¸­æ€§ï¼Œè°¨æ…å…¥åœº
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒæ”¹å˜
- âŒ æ—§: ç”¨ LangChain å¤æ‚ API (ç‰ˆæœ¬å…¼å®¹é—®é¢˜)
- âœ… æ–°: ç”¨ OpenAI SDK å®˜æ–¹æ–¹å¼ (å®˜æ–¹æ¨èï¼Œ100% ç¨³å®š)

### å…³é”®æ–‡ä»¶

**`agents/trading_agent.py`**
- `create_llm_agent()` - åˆ›å»º OpenAI SDK å®¢æˆ·ç«¯
- `llm_agent_process()` - è°ƒç”¨ DeepSeek API
- `run_agent_loop()` - ä¸»äº¤äº’å¾ªç¯

**å·¥ä½œæµç¨‹**

```python
# 1. åˆ›å»ºå®˜æ–¹ OpenAI SDK å®¢æˆ·ç«¯ï¼ˆè¿æ¥ DeepSeekï¼‰
client = OpenAI(
    api_key="sk-...",
    base_url="https://api.deepseek.com"  # å®˜æ–¹æ¨è
)

# 2. è°ƒç”¨ DeepSeek API
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[...],
    stream=False
)

# 3. è·å– LLM çš„å›åº”å¹¶è°ƒç”¨å¯¹åº”å·¥å…·
llm_response = response.choices[0].message.content
tool_result = call_tool(llm_response)
```

---

## ğŸ’¬ æ”¯æŒçš„æ‰€æœ‰å‘½ä»¤

| ç”¨æˆ·è¾“å…¥ | LLM è¯†åˆ« | è°ƒç”¨å·¥å…· | è¿”å›ç»“æœ |
|---------|---------|---------|---------|
| å¸‚åœºæ€ä¹ˆæ · | å¸‚åœºåˆ†æ | query_market_breadth | ğŸ“Š å¸‚åœºå®½åº¦åˆ†æ |
| ä»Šå¤©æœ‰ä»€ä¹ˆè‚¡ç¥¨ | äº¤æ˜“ä¿¡å· | query_today_signals | ğŸ“ˆ æ¨èè‚¡ç¥¨åˆ—è¡¨ |
| ç³»ç»Ÿå‚æ•°æ˜¯ä»€ä¹ˆ | ç³»ç»Ÿé…ç½® | get_system_parameters | âš™ï¸ æ‰€æœ‰å‚æ•° |
| å†å²è¡¨ç°æ€ä¹ˆæ · | å›æµ‹ç»Ÿè®¡ | query_backtest_stats | ğŸ“‰ è¡¨ç°æ•°æ® |
| æ›´æ–°ç³»ç»Ÿæ•°æ® | ç³»ç»Ÿæ›´æ–° | run_system_update | ğŸ”„ æ›´æ–°å®Œæˆ |
| help | å¸®åŠ© | help_command | ğŸ“– ä½¿ç”¨æŒ‡å— |

---

## ğŸ¯ å¿«é€Ÿå¯åŠ¨

```bash
cd /home/deeproute/zj/cg/a-share-agent

# è®¾ç½®ç¯å¢ƒå˜é‡
export DEEPSEEK_API_KEY="sk-0252c421598b44a9be3cbe68425dfa0d"
export TRADING_MODEL="deepseek"

# å¯åŠ¨ AI Agent
python3 scripts/run_agent.py
```

---

## ğŸ“ˆ ç³»ç»Ÿä¼˜åŠ¿

âœ… **100% ä¸­æ–‡è‡ªç„¶è¯­è¨€äº¤äº’**
   - æ— éœ€ç¼–ç¨‹çŸ¥è¯†
   - æ¥è¿‘è‡ªç„¶èŠå¤©

âœ… **çœŸæ­£çš„ AI æ™ºèƒ½ä½“**
   - DeepSeek çœŸå® LLM é©±åŠ¨
   - ç†è§£ç”¨æˆ·æ„å›¾
   - æ™ºèƒ½å·¥å…·è°ƒç”¨

âœ… **å®Œå…¨å…è´¹**
   - DeepSeek å…è´¹é¢åº¦è¶³å¤Ÿ
   - æ— ä»˜è´¹é™åˆ¶

âœ… **100% å¯é **
   - å®˜æ–¹ API æ–¹å¼
   - å®Œå…¨å…¼å®¹æ€§

âœ… **å®æ—¶å¸‚åœºåˆ†æ**
   - åŸºäºçœŸå®æ•°æ®
   - å‡†ç¡®çš„äº¤æ˜“ä¿¡å·

---

## ğŸŒŸ å·¥ä½œæµæ¼”ç¤º

### ç¤ºä¾‹ 1: å¸‚åœºåˆ†æ

```
ğŸ§‘ ä½ : ç°åœ¨å¸‚åœºæ€ä¹ˆæ ·?

[èƒŒåå·¥ä½œ]
1. LLM ç†è§£: ç”¨æˆ·æƒ³è¦å¸‚åœºåˆ†æ
2. LLM å†³å®š: è°ƒç”¨ query_market_breadth å·¥å…·
3. å·¥å…·æ‰§è¡Œ: è·å–å¸‚åœºå®½åº¦æ•°æ®
4. ç»“æœè¿”å›: å¸‚åœºæ€åŠ¿ã€æ¨èä»“ä½ç­‰

ğŸ¤– Agent: ğŸ“Š å¸‚åœºå®½åº¦åˆ†æ...
```

### ç¤ºä¾‹ 2: è‚¡ç¥¨æ¨è

```
ğŸ§‘ ä½ : ä»Šå¤©æœ‰ä»€ä¹ˆæ¨èçš„è‚¡ç¥¨å—?

[èƒŒåå·¥ä½œ]
1. LLM ç†è§£: ç”¨æˆ·æƒ³è¦äº¤æ˜“ä¿¡å·
2. LLM å†³å®š: è°ƒç”¨ query_today_signals å·¥å…·
3. å·¥å…·æ‰§è¡Œ: ç”Ÿæˆä»Šæ—¥ä¿¡å·
4. ç»“æœè¿”å›: å‰ 5 ä¸ªæ¨èæ ‡çš„

ğŸ¤– Agent: ğŸ“ˆ ä»Šæ—¥äº¤æ˜“è®¢å•...
```

---

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### DeepSeek API é…ç½®
- **Base URL**: `https://api.deepseek.com` (å®˜æ–¹æ¨è)
- **Model**: `deepseek-chat`
- **API Key**: ä»å®˜æ–¹è·å–çš„ token

### è°ƒç”¨ç¤ºä¾‹
```python
from openai import OpenAI

client = OpenAI(
    api_key=os.environ.get('DEEPSEEK_API_KEY'),
    base_url="https://api.deepseek.com"
)

response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ A è‚¡äº¤æ˜“åŠ©æ‰‹"},
        {"role": "user", "content": "ç°åœ¨å¸‚åœºæ€ä¹ˆæ ·"}
    ]
)

print(response.choices[0].message.content)
```

---

## ğŸ“Š æˆåŠŸæ ‡å¿—

âœ… `âœ… LLM Agent å·²åŠ è½½ (ä½¿ç”¨ DeepSeek API)`
âœ… `[LLM] DeepSeek è¿”å›: ...`
âœ… `[LLM] è§¦å‘å·¥å…·: query_market_breadth`
âœ… è¿”å›å‡†ç¡®çš„å¸‚åœºåˆ†æç»“æœ

---

## ğŸŠ æœ€ç»ˆæˆæœ

ğŸŒŸ **å®Œæ•´çš„ AI äº¤æ˜“åŠ©æ‰‹ç³»ç»Ÿ**
- è‡ªç„¶è¯­è¨€ç†è§£ âœ…
- æ™ºèƒ½å·¥å…·è°ƒç”¨ âœ…
- å®æ—¶å¸‚åœºåˆ†æ âœ…
- å®Œå…¨å…è´¹ âœ…

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. âœ… ç³»ç»Ÿå·²å®Œå…¨å°±ç»ª
2. âœ… å¯ä»¥ç›´æ¥ä½¿ç”¨
3. âœ… æ— éœ€ä»»ä½•è°ƒæ•´

**ç¥äº¤æ˜“é¡ºåˆ©ï¼ğŸ“ˆâœ¨**

